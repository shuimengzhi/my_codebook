## 普通索引
B-Tree
一般读取数据库是一行一行的读，而使用索引则可以按列读取，然后读取到符合条件的时候，再读取那一行。
一个索引可以包含多个列，如果添加索引时，添加的最左侧的那列不在搜索访问，那么这整个索引就不会用到。
索引读取顺序是从索引最左侧的列开始读取，因此越频繁使用的搜索列越排左会更好。![1](./1.png)

## 添加索引

![](./2.png)

index代表添加索引，索引名字叫做aa，最常用的是password,其次是uid。查询的时候如果只有uid没有password，则不会引用到aa的索引
```
explain 查询语句
```
预估查询语句搜索行数，以及使用到的索引，进行粗略的判断是否需要优化查询
##查询优化
>1.查询的时候尽量不用联表，数据之间的连接在代码层面来进行存储连接
>2.如果查询的结果过大，不要使用缓存查询（用mysql_unbuffered_query()）,因为平时查询机制是查询过程中将结果放入缓存，然后查询完后，一口气抛给请求数据的地方。客户端与mysql服务端是半双工的通讯方式，只能一方发送，另一方接受。或者与之相反。

##事务锁

> 执行数据库查询命令的时候，有可能部分执行成功，部分失败。比如两张表，一张记录扣了多少钱，一张记录买到什么东西。如果扣了多少钱的那张表执行成功了，而买东西的表记录失败了，那么就会出现有了白花钱的情况。为了防止这种事情的发生，需要将两者表的查询绑定，当全部执行成功时才返回数据。具体百度：事务锁

## 设计表结构

> 用MyISAM引擎时别用允许null存在，因为索引的时候null不好判断null的类型，并且不好进行比较。不过null的优化对于速度提升比较小。InnoDB引擎则无所谓null